<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pet问题反馈 &mdash; Pet-doc 0.7.0 文档</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Pet-doc
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">开始你的第一步</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/about_pet_zh.html">关于Pet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/why_pet_zh.html">为什么选择Pet？</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/install_zh.html">Pet安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/quick_start.html">快速开始</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">使用教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/configs_zh.html">配置系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/hook_zh.html">Hook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/data_zh.html">数据加载教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/solver_zh.html">迭代优化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/model_building_zh.html">模型构建</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/training_zh.html">训练教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/evaluation_zh.html">评估教程</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">应用实践</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/basic/cls_zh.html">在ImageNet数据集上训练分类模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/basic/semseg_zh.html">在ADE20K数据集上训练resnet50+PSP模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/basic/det_zh.html">在MSCOCO2017数据集上训练Faster R-CNN模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/basic/parsing_zh.html">Parsing教程/Parsing R-CNN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/customer/new_backbone_zh.html">添加新的模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/customer/new_dataset_zh.html">添加自定义数据集</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/core/pr_zh.html">扩展</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/core/issue_zh.html">Pet问题反馈</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">语言切换</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../switch_language.html"><a href='https://mmdetection.readthedocs.io/en/latest/'>English</a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../switch_language.html#a-href-https-mmdetection-readthedocs-io-zh-cn-latest-a"><a href='https://mmdetection.readthedocs.io/zh_CN/latest/'>简体中文</a></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">接口文档（英文）</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Pet-doc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Pet问题反馈</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/tutorials/core/issue_zh.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pet">
<h1>Pet问题反馈<a class="headerlink" href="#pet" title="永久链接至标题"></a></h1>
<p>这里进行两个方面的介绍：</p>
<ul class="simple">
<li><p>提问与贡献解决方案</p></li>
<li><p>pet安装常见问题的示例</p></li>
</ul>
<section id="id1">
<h2>提问与贡献解决方案<a class="headerlink" href="#id1" title="永久链接至标题"></a></h2>
<p>这里我们希望为使用者在安装和使用pet时提供一个解决问题的途径。</p>
<section id="id2">
<h3>关于提问的注意内容<a class="headerlink" href="#id2" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>安装出现问题时，请先核对环境要求、安装步骤和已存在的解决方案</p></li>
<li><p>不要针对一个问题重复提问</p></li>
<li><p>提问时，请将自己的环境、执行过程、描述清楚</p></li>
<li><p>遇到不同于已有的问题时，创建新的Issue，以问题出现的环节命名</p></li>
</ul>
<p>在此，我们也十分欢迎和感谢用户提供自己的解决方案</p>
</section>
</section>
<section id="id3">
<h2>安装中常见问题的示例<a class="headerlink" href="#id3" title="永久链接至标题"></a></h2>
<p>这里用来介绍pet安装的常见问题及解决办法，按问题产生的执行步骤划分板块，来汇总错误。</p>
<section id="sudo-pip3-install-r-pytorcheverything-requirements-txt">
<h3>执行“sudo pip3 install -r PytorchEveryThing/requirements.txt”<a class="headerlink" href="#sudo-pip3-install-r-pytorcheverything-requirements-txt" title="永久链接至标题"></a></h3>
<p>Issue 1：报错信息显示：“no module named gdbm”问题。</p>
<p>解决方案：使用apt-get安装“python3.5-gdbm”模块：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python3</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="n">gdbm</span>
</pre></div>
</div>
<p>Issue 2：报错信息显示：”python setup.py egg_info”。</p>
<p>解决方案：安装“libpq-dev“和”python3.5-dev”模块：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">libpq</span><span class="o">-</span><span class="n">dev</span> <span class="n">python3</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</section>
<section id="pytorcheverything-pet-make">
<h3>在“PytorchEveryThing/pet”下执行“./make”<a class="headerlink" href="#pytorcheverything-pet-make" title="永久链接至标题"></a></h3>
<p>Issue 1：“make: g++: Command not found”</p>
<p>解决方案：更新apt-get,安装与gcc对应版本的g++</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">g</span><span class="o">++</span>
</pre></div>
</div>
<p>Issue 2：ImportError: torch.utils.ffi requires the cffi package
解决方案：在python2.7下安装“cffi”模块</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">cffi</span>
</pre></div>
</div>
</section>
<section id="ssd">
<h3>运行SSD时的错误<a class="headerlink" href="#ssd" title="永久链接至标题"></a></h3>
<section id="issue-runtimeerror-randperm-is-only-implemented-for-cpu">
<h4>Issue ：RuntimeError: randperm is only implemented for CPU<a class="headerlink" href="#issue-runtimeerror-randperm-is-only-implemented-for-cpu" title="永久链接至标题"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;./tools/ssd/train_net_multi_gpu.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">330</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="n">main</span><span class="p">()</span>
<span class="n">File</span> <span class="s2">&quot;./tools/ssd/train_net_multi_gpu.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">299</span><span class="p">,</span> <span class="ow">in</span> <span class="n">main</span>
<span class="n">train_loss</span> <span class="o">=</span> <span class="n">train</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">train_loader</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">priors</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">epoch</span><span class="p">)</span>
<span class="n">File</span> <span class="s2">&quot;./tools/ssd/train_net_multi_gpu.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">72</span><span class="p">,</span> <span class="ow">in</span> <span class="n">train</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">targets</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
<span class="n">File</span> <span class="s2">&quot;/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">451</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__iter__</span>
<span class="k">return</span> <span class="n">_DataLoaderIter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="n">File</span> <span class="s2">&quot;/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">247</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_put_indices</span><span class="p">()</span>
<span class="n">File</span> <span class="s2">&quot;/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">295</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_put_indices</span>
<span class="n">indices</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_iter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">File</span> <span class="s2">&quot;/usr/local/lib/python3.5/dist-packages/torch/utils/data/sampler.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">138</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__iter__</span>
<span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampler</span><span class="p">:</span>
<span class="n">File</span> <span class="s2">&quot;/usr/local/lib/python3.5/dist-packages/torch/utils/data/sampler.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">51</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__iter__</span>
<span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randperm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_source</span><span class="p">))</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">randperm</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">implemented</span> <span class="k">for</span> <span class="n">CPU</span>
</pre></div>
</div>
<p>解决方案：修改“python3.6/site-packages/torch/utils/data“路径下的”sampler.py”文件</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">torch</span><span class="o">/</span><span class="n">utils</span><span class="o">/</span><span class="n">data</span>
<span class="n">sudo</span> <span class="n">vim</span> <span class="n">sampler</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>(类名称：RandomSampler；函数：iter；51行)将原来的:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randperm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_source</span><span class="p">))</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</pre></div>
</div>
<p>修改为：</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cpu</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s1">&#39;cpu&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randperm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_source</span><span class="p">),</span> <span class="n">device</span><span class="o">=</span><span class="n">cpu</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2018-2021, BUPT_PRIV.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>